<!DOCTYPE html>
<html lang="en">

<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Постепенное появление снежинок</title>
   <style>
      body {
         margin: 0;
         overflow: hidden;
         background: linear-gradient(to bottom, #001f3f, #0074D9);
      }

      canvas {
         display: block;
      }
   </style>
</head>

<body>
   <canvas id="snowCanvas"></canvas>

   <script>
      const canvas = document.getElementById('snowCanvas');
      const ctx = canvas.getContext('2d');

      // Установка размера канваса
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;

      const snowflakes = [];
      let maxSnowflakes = 10; // Начальное количество снежинок
      let wind = 0; // Скорость ветра

      // Генерация снежинки
      function createSnowflake() {
         const size = Math.random() * 5 + 2; // Размер снежинки
         snowflakes.push({
            x: Math.random() * canvas.width,
            y: -size, // Начальная позиция выше экрана
            radius: size,
            speed: Math.random() * 2 + 1, // Скорость падения
            drift: Math.random() * 2 - 1 // Горизонтальное смещение
         });
      }

      // Обновление снежинок
      function updateSnowflakes() {
         // Увеличиваем количество снежинок постепенно
         if (snowflakes.length < maxSnowflakes) {
            createSnowflake();
         }

         for (const snowflake of snowflakes) {
            snowflake.y += snowflake.speed;
            snowflake.x += snowflake.drift + wind; // Влияние ветра

            // Перемещение снежинки назад, если она выходит за экран
            if (snowflake.y > canvas.height || snowflake.x > canvas.width || snowflake.x < 0) {
               snowflake.y = -snowflake.radius;
               snowflake.x = Math.random() * canvas.width;
            }
         }
      }

      // Рисование снежинок
      function drawSnowflakes() {
         ctx.clearRect(0, 0, canvas.width, canvas.height); // Очистка канваса
         ctx.fillStyle = 'white';
         ctx.beginPath();
         for (const snowflake of snowflakes) {
            ctx.moveTo(snowflake.x, snowflake.y);
            ctx.arc(snowflake.x, snowflake.y, snowflake.radius, 0, Math.PI * 2);
         }
         ctx.fill();
      }

      // Изменение ветра со временем
      function updateWind() {
         wind += (Math.random() - 0.5) * 0.1; // Изменение ветра
         wind = Math.max(-1, Math.min(1, wind)); // Ограничение скорости ветра
      }

      // Постепенное увеличение снежинок
      function increaseSnowflakes() {
         if (maxSnowflakes < 200) { // Установите максимальное количество снежинок
            maxSnowflakes += 1;
         }
      }

      // Анимация
      function animate() {
         updateSnowflakes();
         drawSnowflakes();
         updateWind();
         requestAnimationFrame(animate);
      }

      // Увеличение количества снежинок со временем
      setInterval(increaseSnowflakes, 500); // Каждые 500 мс добавляем одну снежинку

      // Запуск анимации
      animate();

      // Изменение размера канваса при изменении окна
      window.addEventListener('resize', () => {
         canvas.width = window.innerWidth;
         canvas.height = window.innerHeight;
      });
   </script>
</body>

</html>